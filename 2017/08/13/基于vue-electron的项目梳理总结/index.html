<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="A contented mind is a perpetual feast."><title>基于vue-electron的项目梳理总结 | WaterBlog</title><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">基于vue-electron的项目梳理总结</h1><a id="logo" href="/.">WaterBlog</a><p class="description">WaterGayGay的博客</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/collection/"><i class="fa fa-bookmark"> 收藏</i></a><a href="/history/"><i class="fa fa-book"> 历史</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">基于vue-electron的项目梳理总结</h1><div class="post-meta">Aug 13, 2017<span> | </span><span class="category"><a href="/categories/FontEnd/">FontEnd</a></span></div><div class="post-content"><h3 id="项目由来"><a href="#项目由来" class="headerlink" title="项目由来"></a>项目由来</h3><p>其实这是一个课程设计，噗呲。因为要求要GUI，而我又是一个向FontEnd Developer方向发展的小白，自然而然想到了<code>Electron</code>来套壳，让网页变成桌面应用，之前只是了解过这个领域，没真正实践过，所以这此项目也是对<code>Electron</code>的一个认识和学习吧。</p>
<p>项目的实现是一个<code>WIndows平台的文件管理器</code>，实现了基本的文件操作功能，新建，删除，复制，粘贴，剪切，重命名。</p>
<p>项目地址：<a href="https://github.com/k-water/electron-filesystem" target="_blank" rel="external">https://github.com/k-water/electron-filesystem</a></p>
<a id="more"></a>
<h3 id="什么是Electron"><a href="#什么是Electron" class="headerlink" title="什么是Electron"></a>什么是Electron</h3><p>Electron 可以让你使用纯 JavaScript 调用丰富的原生 APIs 来创造桌面应用。你可以把它看作是专注于桌面应用而不是 web 服务器的，io.js 的一个变体。</p>
<p>这不意味着 Electron 是绑定了 GUI 库的 JavaScript。相反，Electron 使用 web 页面作为它的 GUI，所以你能把它看作成一个被 JavaScript 控制的，精简版的 Chromium 浏览器。</p>
<p>以下资料供参考学习：<br><a href="https://zh.wikipedia.org/wiki/Electron_(%E8%BD%AF%E4%BB%B6%E6%A1%86%E6%9E%B6" target="_blank" rel="external">Electron(维基百科)</a>)<br><a href="https://www.w3cschool.cn/electronmanual/" target="_blank" rel="external">中文文档</a><br><a href="https://segmentfault.com/a/1190000007503495" target="_blank" rel="external">(译)Electron的本质</a><br><a href="http://ourcodeworld.com/articles/read/106/how-to-choose-read-save-delete-or-create-a-file-with-electron-framework" target="_blank" rel="external">入门视频教程</a></p>
<h3 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h3><ul>
<li>[x] Vue</li>
<li>[x] VueRouter</li>
<li>[x] Vuex</li>
<li>[x] Vue-Electron</li>
<li>[x] iView</li>
<li>[x] Eslint</li>
<li>[x] Babel</li>
<li>[x] Webpack</li>
<li>[x] Less</li>
<li>[x] Nodejs<br>项目采用了vue-cli脚手架搭建开发环境，在开始编码之前，在gayhub上搜了一下，发现有大神写了一个基于vue和electron的脚手架，看了文档后，发现正好适合我的需要，瞬间发现了新大陆。</li>
</ul>
<p>项目名称：<code>electron-vue</code><br>项目地址：<a href="https://github.com/SimulatedGREG/electron-vue" target="_blank" rel="external">https://github.com/SimulatedGREG/electron-vue</a><br>项目文档(英文的)：<a href="https://simulatedgreg.gitbooks.io/electron-vue/content/en/" target="_blank" rel="external">https://simulatedgreg.gitbooks.io/electron-vue/content/en/</a></p>
<blockquote>
<p>PS：在开始编码之前要仔细阅读文档。</p>
</blockquote>
<h3 id="工程目录"><a href="#工程目录" class="headerlink" title="工程目录"></a>工程目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">│</div><div class="line">├── README.md                           &lt;=  项目介绍</div><div class="line">├── app                                 &lt;=  开发目录</div><div class="line">│   ├── dist                            &lt;= 编译打包</div><div class="line">│   ├── icons                           &lt;= 相关图标</div><div class="line">│   ├── src                             &lt;= 项目源代码</div><div class="line">│   │   ├── main                        &lt;= electron主进程</div><div class="line">│   │   │   ├── application.js</div><div class="line">│   │   │   ├── index.dev.js</div><div class="line">│   │   │   ├── index.js</div><div class="line">│   │   ├── renderer                    &lt;= electron渲染进程</div><div class="line">│   │   │   ├── App.vue                 &lt;=  Vue 根组件</div><div class="line">│   │   │   ├── main.js                 &lt;=  Vue 入口</div><div class="line">│   │   │   ├── assets                  &lt;=  静态资源</div><div class="line">│   │   │   │   ├── disk-ssd.png</div><div class="line">│   │   │   │   ├── disk.png</div><div class="line">│   │   │   │   ├── logo.png</div><div class="line">│   │   │   ├── common                  &lt;=  公共配置</div><div class="line">│   │   │   │   ├── file.js</div><div class="line">│   │   │   │   ├── icon.js</div><div class="line">│   │   │   ├── config                  &lt;=  项目配置</div><div class="line">│   │   │   │   ├── canvas.js</div><div class="line">│   │   │   ├── extend                  &lt;=  Vue 扩展相关</div><div class="line">│   │   │   │   ├── filtes.js</div><div class="line">│   │   │   │   ├── index.js</div><div class="line">│   │   │   ├── router                  &lt;=  Vue 路由相关</div><div class="line">│   │   │   │   ├── history.js</div><div class="line">│   │   │   │   ├── index.js</div><div class="line">│   │   │   │   ├── routes.js</div><div class="line">│   │   │   ├── store                   &lt;=  Vuex</div><div class="line">│   │   │   │   ├── modules</div><div class="line">│   │   │   │   ├── actions.js</div><div class="line">│   │   │   │   ├── getters.js</div><div class="line">│   │   │   │   ├── index.js</div><div class="line">│   │   │   │   ├── mutation-types.js</div><div class="line">│   │   │   │   ├── mutations.js</div><div class="line">│   │   │   │   ├── state.js</div><div class="line">│   │   │   ├── views                   &lt;=  视图层</div><div class="line">│   │   │   │   ├── files</div><div class="line">│   │   │   │   │   ├── folder.vue</div><div class="line">│   │   │   │   ├── index</div><div class="line">│   │   │   │   │   ├── index.vue</div><div class="line">│   │   │   │   ├── sideBar</div><div class="line">│   │   │   │   │   ├── leftBar.vue</div><div class="line">│   │   │   │   │   ├── rightBar.vue</div><div class="line">│   │   │   │   │   ├── rightDisk.vue</div><div class="line">│   │   │   │   ├── login.vue</div><div class="line">│   ├── index.ejs                       &lt;= 模板文件</div><div class="line">│   ├── package.json                    &lt;=  相关依赖</div><div class="line">├── build                               &lt;=  打包桌面应用相关</div><div class="line">│   ├── Gruntfile.js                    &lt;=  构建脚本</div><div class="line">│   ├── package.json                    &lt;=  相关依赖</div><div class="line">├── tasks                               &lt;=  electron-packeger打包</div><div class="line">│   ├── release.js</div><div class="line">│   ├── runner.js</div><div class="line">├── <span class="built_in">test</span>                                &lt;=  测试文件夹  </div><div class="line">│   ├── e2e</div><div class="line">│   ├── unit</div><div class="line">│   ├── .eslintrc</div><div class="line">├── config.js                           &lt;=  electron打包配置</div><div class="line">├── webpack.main.config.js</div><div class="line">├── webpack.renderer.config.js</div><div class="line">├── package.js</div><div class="line">│</div></pre></td></tr></table></figure>
<h3 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># install dependencies</span></div><div class="line">npm install</div><div class="line"></div><div class="line"><span class="comment"># serve with hot reload at localhost:9080</span></div><div class="line">npm run dev</div><div class="line"></div><div class="line"><span class="comment"># build electron app for production</span></div><div class="line">npm run build</div><div class="line"></div><div class="line"><span class="comment"># lint all JS/Vue component files in `app/src`</span></div><div class="line">npm run lint</div><div class="line"></div><div class="line"><span class="comment"># run webpack in production</span></div><div class="line">npm run pack</div></pre></td></tr></table></figure>
<hr>
<h3 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h3><p><img src="https://oc1gyfe6q.qnssl.com/17-8-13/94171252.jpg" alt=""></p>
<p><img src="https://oc1gyfe6q.qnssl.com/17-8-13/63034830.jpg" alt=""></p>
<p><img src="https://oc1gyfe6q.qnssl.com/17-8-13/51761758.jpg" alt=""></p>
<p><img src="https://oc1gyfe6q.qnssl.com/17-8-13/20713678.jpg" alt=""></p>
<h3 id="项目打包"><a href="#项目打包" class="headerlink" title="项目打包"></a>项目打包</h3><p>因为之前没有实践过<code>Electron</code>，所以一开始的时候查阅了Electron的文档，知道他大概是什么之后，阅读他的文档，初步熟悉他的API，然后开始技术选型，也就是上面说到的<code>vue-electron</code>脚手架，然后开始设计构思编码。</p>
<p>要说什么大问题没有，一般都是Google搜一搜能解决的。不过，在基本完成项目功能后，第一次尝试构建打包，打包成桌面应用exe文件，这一路真的是不容易啊，各种问题，我也不知道是什么原因。</p>
<p>第一次尝试打包，因为第一次打包要下载对应平台的<code>electron</code>包，在这方面是一个坑，因为Electron的源是在国外的，所以“机智”的我一开始就换成了国内的淘宝镜像，但是这并不能解决问题，下载还是那么的慢啊~慢啊~</p>
<p>我20M的宽带到<code>npm</code>这里只有<code>4KB/s</code>，内心毫无波动，后来经过Google各种搜索各种尝试，找到了一个方法是，可以在淘宝镜像在上下载对应版本的<code>electron</code>包在自己的<code>.electron</code>的文件，这样在打包的时候<code>npm</code>检测到本地有包存在就不会去下载了，尝试了一下，还真的可以，瞬间又看到了希望。</p>
<blockquote>
<p>PS：上述所说的<code>.electron</code>文件夹是全局安装electron时的文件夹，全局安装一下<code>electron</code>挺方便的，一般这个路径在系统的根目录下，以我windows系统为例，如下：<br><img src="https://oc1gyfe6q.qnssl.com/17-8-14/90563045.jpg" alt=""><br>（笑Cry，我下了好多包）</p>
</blockquote>
<p>这一步做完之后，又开始了打包历程，然后这时候又提示下载其他包了，各种<code>Connect Time Out</code>，尝试各种方法未果，然后就放弃了~~~</p>
<p>开玩笑的，作为一个“有追求的”程序猿，果断尝试另外一种方法，一开始我是用<code>electron-builder</code>打包，尝试失败后用了<code>electron-packager</code>打包，改写了打包配置，经过一番折腾之后，查资料等，终于看见了希望的曙光，打包成功了~Orz</p>
<p>打包成功后会生成对应平台的应用程序，如下</p>
<p><img src="https://oc1gyfe6q.qnssl.com/17-8-14/17963836.jpg" alt=""></p>
<h3 id="制作应用程序"><a href="#制作应用程序" class="headerlink" title="制作应用程序"></a>制作应用程序</h3><p>打包成功后，我还是觉得有点不满足，决定再折腾一下，制作应用程序，也就是通俗说的<code>双击安装包然后能安装到自己的电脑上</code>。<br>网上找了一下资料，然后又是开始各种尝试，最后找到了一个方法，用了<code>Grunt</code>来构建，主要是<code>grunt-electron-installer</code>这个包，然后写了一下配置，执行脚本，尝试成功，至此，这个项目折腾也差不多结束了。</p>
<p>脚本代码如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> grunt = <span class="built_in">require</span>(<span class="string">'grunt'</span>)</div><div class="line">grunt</div><div class="line">  .config</div><div class="line">  .init(&#123;</div><div class="line">    pkg: grunt</div><div class="line">      .file</div><div class="line">      .readJSON(<span class="string">'package.json'</span>),</div><div class="line">    <span class="string">'create-windows-installer'</span>: &#123;</div><div class="line">      x64: &#123;</div><div class="line">        appDirectory: <span class="string">'./fileSystem-win32-x64'</span>,</div><div class="line">        authors: <span class="string">'water'</span>,</div><div class="line">        exe: <span class="string">'fileSystem.exe'</span>,</div><div class="line">        description: <span class="string">'fileSystem'</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">grunt.loadNpmTasks(<span class="string">'grunt-electron-installer'</span>)</div><div class="line">grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'create-windows-installer'</span>])</div></pre></td></tr></table></figure></p>
<p>执行成功后会在相对应文件夹生成<code>installer</code>文件夹，双击<code>Setup.exe</code>即可安装。</p>
<blockquote>
<p>PS：<a href="https://www.npmjs.com/package/grunt-electron-installer" target="_blank" rel="external">grunt-electron-installer</a> NPM相关说明</p>
</blockquote>
</div><div class="tags"><a href="/tags/Vue/">Vue</a><a href="/tags/Electron/">Electron</a></div><div class="post-nav"><a href="/2017/08/18/在Vue中使用第三方库/" class="pre">在Vue中使用第三方库</a><a href="/2017/08/01/媒体查询/" class="next">媒体查询</a></div><div id="container"></div><link rel="stylesheet" href="/css/default.css?v=1.0.0"><script src="/js/gitment.browser.js?v=1.0.0"></script><script>var gitment = new Gitment({
  owner: 'k-water',
  repo: 'k-water.github.io',
  oauth: {
    client_id: 'b80d9a577bec58f5cd74',
    client_secret: 'bb14317e485db9a408465da9eac80af12e340ad9',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://waterlin.cn"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/more/"><!--more--></a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/BackEnd/">BackEnd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/FontEnd/">FontEnd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Server/">Server</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tool/">Tool</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/Data-struct/" style="font-size: 15px;">Data struct</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/BFC/" style="font-size: 15px;">BFC</a> <a href="/tags/HTML5/" style="font-size: 15px;">HTML5</a> <a href="/tags/Sass/" style="font-size: 15px;">Sass</a> <a href="/tags/Browser/" style="font-size: 15px;">Browser</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/CSS3/" style="font-size: 15px;">CSS3</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/Blog/" style="font-size: 15px;">Blog</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/汇编/" style="font-size: 15px;">汇编</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/MongoDB/" style="font-size: 15px;">MongoDB</a> <a href="/tags/服务器/" style="font-size: 15px;">服务器</a> <a href="/tags/转载/" style="font-size: 15px;">转载</a> <a href="/tags/RegExp/" style="font-size: 15px;">RegExp</a> <a href="/tags/IFE/" style="font-size: 15px;">IFE</a> <a href="/tags/VSCode/" style="font-size: 15px;">VSCode</a> <a href="/tags/Electron/" style="font-size: 15px;">Electron</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/10/22/离散化求矩形的并/">离散化求矩形的并</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/11/underscore源码学习（八）/">underscore源码学习（八）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/29/underscore源码学习（七）/">underscore源码学习（七）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/27/underscore源码学习（六）/">underscore源码学习（六）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/26/underscore源码学习（五）/">underscore源码学习（五）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/22/underscore源码学习（四）/">underscore源码学习（四）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/19/underscore源码学习（三）/">underscore源码学习（三）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/17/underscore源码学习（二）/">underscore源码学习（二）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/15/underscore源码学习（一）/">underscore源码学习（一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/22/JavaScript-Sorting-Algorithm/">JavaScript Sorting Algorithm</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://blog.lxstart.net/" title="x-cold" target="_blank">x-cold</a><ul></ul><a href="http://www.cnblogs.com/liuweimingcprogram" title="SCAU_L" target="_blank">SCAU_L</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2016-2017 <a href="/." rel="nofollow">WaterBlog.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" color="0,0,0" opacity="0.5" zIndex="-2" count="50" src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script><script type="text/javascript" src="/js/background-canvas.js?v=1.0.0"></script></div></body></html>